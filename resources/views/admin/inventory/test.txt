// inventory calculation
    $("#unit_price, #quantity").on('change', function() {
        var amount = 0;
        var net_total_amount = 0;

        // Get price value
        var priceInput = $("#unit_price").val();
        var price = parseFloat(priceInput);

        // Check if price is a valid number
        if (!isNaN(price)) {
            // Format price
            var formattedPrice = price.toFixed(2);
            $("#unit_price").val(formattedPrice);

            // Get quantity value
            var quantityInput = $("#quantity").val();
            var quantity = parseFloat(quantityInput);

            // Check if quantity is a valid number
            if (!isNaN(quantity)) {
                // Format quantity
                var formattedQuantity = quantity.toFixed(2);
                $("#quantity").val(formattedQuantity);

                // Calculate amounts
                amount = price * quantity;
                $("#amount").val(amount.toFixed(2));
                
                // Set default value for VAT
                $("#vat").val("0.00");

                // Set default value for tax
                $("#tax").val("0.00");

                // Set default value for discount percentage
                $("#discount_percentage").val("0.00");

                // Calculation
                var vat = parseFloat($("#vat").val());
                var tax = parseFloat($("#tax").val());
                var discount_percentage = parseFloat($("#discount_percentage").val());

                var total_vat = (amount * vat) / 100;
                var total_tax = (amount * tax) / 100;
                var total_discount = (amount * discount_percentage) / 100;
                net_total_amount = amount + total_vat + total_tax - total_discount;
            }
        }

        // Update sub_total field
        $("#sub_total").val(net_total_amount.toFixed(2));
    });
    // Listen for change event on VAT, tax, and discount_percentage fields
    $("#vat, #tax, #discount_percentage").on('change', function() {
        var vatInput = $("#vat").val();
        var formattedVat = parseFloat(vatInput).toFixed(2);
        $("#vat").val(formattedVat);

        var taxInput = $("#tax").val();
        var formattedTax = parseFloat(taxInput).toFixed(2);
        $("#tax").val(formattedTax);

        var discountPercentageInput = $("#discount_percentage").val();
        var formattedDiscountPercentage = parseFloat(discountPercentageInput).toFixed(2);
        $("#discount_percentage").val(formattedDiscountPercentage);

        // Calculate net total amount
        var price = parseFloat($("#unit_price").val());
        var quantity = parseFloat($("#quantity").val());
        var amount = price * quantity;
        var vat = parseFloat($("#vat").val());
        var tax = parseFloat($("#tax").val());
        var discount_percentage = parseFloat($("#discount_percentage").val());

        var total_vat = (amount * vat) / 100;
        var total_tax = (amount * tax) / 100;
        var total_discount = (amount * discount_percentage) / 100;
        var net_total_amount = amount + total_vat + total_tax - total_discount;

        // Update sub_total field
        $("#sub_total").val(net_total_amount.toFixed(2));
    });


    ===================================



    // inventory calculation
    $("#unit_price, #quantity").on('change', function() {
        var amount = 0;
        var net_total_amount = 0;

        // Get price value
        var priceInput = $("#unit_price").val();
        var price = parseFloat(priceInput);

        // Check if price is a valid number
        if (!isNaN(price)) {
            // Format price
            var formattedPrice = price.toLocaleString('en-US', { minimumFractionDigits: 2 });
            $("#unit_price").val(formattedPrice);

            // Get quantity value
            var quantityInput = $("#quantity").val();
            var quantity = parseFloat(quantityInput);

            // Check if quantity is a valid number
            if (!isNaN(quantity)) {
                // Format quantity
                var formattedQuantity = quantity.toLocaleString('en-US', { minimumFractionDigits: 2 });
                $("#quantity").val(formattedQuantity);

                // Calculate amounts
                amount = price * quantity;
                $("#amount").val(amount.toLocaleString('en-US', { minimumFractionDigits: 2 }));
                
                // Set default value for VAT
                $("#vat").val("0.00");

                // Set default value for tax
                $("#tax").val("0.00");

                // Set default value for discount percentage
                $("#discount_percentage").val("0.00");

                // Calculation
                var vat = parseFloat($("#vat").val());
                var tax = parseFloat($("#tax").val());
                var discount_percentage = parseFloat($("#discount_percentage").val());

                var total_vat = (amount * vat) / 100;
                var total_tax = (amount * tax) / 100;
                var total_discount = (amount * discount_percentage) / 100;
                net_total_amount = amount + total_vat + total_tax - total_discount;
            }
        }

        // Update sub_total field
        $("#sub_total").val(net_total_amount.toLocaleString('en-US', { minimumFractionDigits: 2 }));
    });

    // Listen for change event on VAT, tax, and discount_percentage fields
    $("#vat, #tax, #discount_percentage").on('change', function() {
        var vatInput = $("#vat").val();
        var formattedVat = parseFloat(vatInput).toLocaleString('en-US', { minimumFractionDigits: 2 });
        $("#vat").val(formattedVat);

        var taxInput = $("#tax").val();
        var formattedTax = parseFloat(taxInput).toLocaleString('en-US', { minimumFractionDigits: 2 });
        $("#tax").val(formattedTax);

        var discountPercentageInput = $("#discount_percentage").val();
        var formattedDiscountPercentage = parseFloat(discountPercentageInput).toLocaleString('en-US', { minimumFractionDigits: 2 });
        $("#discount_percentage").val(formattedDiscountPercentage);

        // Calculate net total amount
        var price = parseFloat($("#unit_price").val());
        var quantity = parseFloat($("#quantity").val());
        var amount = price * quantity;
        var vat = parseFloat($("#vat").val());
        var tax = parseFloat($("#tax").val());
        var discount_percentage = parseFloat($("#discount_percentage").val());

        var total_vat = (amount * vat) / 100;
        var total_tax = (amount * tax) / 100;
        var total_discount = (amount * discount_percentage) / 100;
        var net_total_amount = amount + total_vat + total_tax - total_discount;

        // Update sub_total field
        $("#sub_total").val(net_total_amount.toLocaleString('en-US', { minimumFractionDigits: 2 }));
    });