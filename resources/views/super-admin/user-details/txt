<?php
    $tableHeads = [
        ['label'=>'ID', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;', 'dataColumn'=>'id', 'dataOrder'=>'desc', 'thClass'=>'table_th_color txt ps-2 pe-1 label-svg', 'thAttribute'=>'', 'svgLable'=>'label-svg'], 
        ['label'=>'Name', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;', 'dataColumn'=>'name', 'dataOrder'=>'desc', 'thClass'=>'table_th_color txt ps-1 label-svg', 'thAttribute'=>'hidden', 'svgLable'=>'label-svg'], 
        ['label'=>'Email', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;', 'dataColumn'=>'email', 'dataOrder'=>'desc', 'thClass'=>'table_th_color txt ps-1 label-svg', 'thAttribute'=>'', 'svgLable'=>'label-svg'], 
        ['label'=>'IP', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;text-align: center;', 'dataColumn'=>'ip_address', 'dataOrder'=>'desc', 'thClass'=>'table_th_color tot_pending_ ps-1 label-svg', 'thAttribute'=>'', 'svgLable'=>'label-svg'], 
        ['label'=>'User Agent', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;text-align: left;', 'dataColumn'=>'user_agent', 'dataOrder'=>'desc', 'thClass'=>'table_th_color tot_pending_ ps-1 label-svg', 'thAttribute'=>'hidden', 'svgLable'=>'label-svg'], 
        ['label'=>'Payload', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;text-align: left;', 'dataColumn'=>'payload', 'dataOrder'=>'desc', 'thClass'=>'table_th_color tot_pending_ ps-1 label-svg', 'thAttribute'=>'', 'svgLable'=>'label-svg'], 
        ['label'=>'Last_activity', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;text-align: left;', 'dataColumn'=>'last_activity', 'dataOrder'=>'desc', 'thClass'=>'table_th_color tot_pending_ ps-1 label-svg', 'thAttribute'=>'hidden', 'svgLable'=>'label-svg'], 
        ['label'=>'Login', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;text-align: left;', 'dataColumn'=>'login', 'dataOrder'=>'desc', 'thClass'=>'table_th_color tot_pending_ ps-1 label-svg', 'thAttribute'=>'', 'svgLable'=>'label-svg'], 
        ['label'=>'Logout', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;', 'dataColumn'=>'logout', 'dataOrder'=>'desc', 'thClass'=>'table_th_color tot_pending_ ps-1 label-svg', 'thAttribute'=>'', 'svgLable'=>'label-svg'], 
        ['label'=>'Activity', 'headId'=>'th_sort', 'headStyle'=>'background-color: white;cursor: pointer;padding: 2px;', 'dataColumn'=>'last_activity', 'dataOrder'=>'desc', 'thClass'=>'table_th_color tot_pending_ ps-1 label-svg', 'thAttribute'=>'', 'svgLable'=>'label-svg'],
    ];
?>
@if($user_activity_authorize == 1)
    @if($user_log_data_table_permission == 1)
        <div class="container table-container-card">
            <div class="row">
                <div class="col-xl-2">
                    <span class="input-search-box">
                        <span class="icon-box">
                            <svg viewBox="0 0 24 24" width="18" height="20" stroke="white" stroke-width="2" fill="rgb(170, 170, 170)" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                        </span>
                        <input type="text" class="date form-control form-control-sm" name="start_date" placeholder="From:DD-MM-YYYY" id="date_start" autocomplete="off">
                    </span>
                </div>
                <div class="col-xl-2">
                    <span class="input-search-box">
                        <span class="icon-box">
                            <svg viewBox="0 0 24 24" width="18" height="20" stroke="white" stroke-width="2" fill="rgb(170, 170, 170)" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                        </span>
                        <input type="text" class="date form-control form-control-sm" name="end_date" placeholder="To:DD-MM-YYYY" id="date_end" autocomplete="off">
                    </span>
                </div>
                <div class="col-xl-3" style="justify-content:start;display:flex;padding-top:2px;">
                    <span class="filter-box">
                        <svg viewBox="0 0 24 24" width="24" height="18" stroke="rgb(170, 170, 170)" stroke-width="2" fill="white" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>
                    </span>
                    <select type="text" class="form-control form-control-sm select2" name="role" id="select_role">
                        <option value="">Select Role</option>
                        @foreach($roles as $item)
                        <option value="{{$item->id}}">{{ $item->name}}</option>
                        @endforeach
                    </select>
                </div>
                <div class="col-xl-5">
                    <span class="input-search-box">
                        <span class="icon-box">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="rgb(170, 170, 170)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
                                <circle cx="11" cy="11" r="8"/>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            </svg>
                        </span>
                        <input class="form-control form-control-sm font-weight" type="search" name="search" value="" placeholder="User Search" id="search" />
                    </span>
                </div>
            </div>
            <x-tables.table-component tableResponsiveClass="table-light activity-table-responsive">
                <x-tables.table tableParentClass="bg-white table-light ord_table center border-1 mt-2">
                    <x-tables.table-head>
                        <x-tables.head-row tableHeadRowClass="table-light table-row order_body acc_setting_table" />
                        @foreach($tableHeads as $data)
                            <th id="{{ $data['headId'] }}" style="{{ $data['headStyle'] }}"
                                data-coloumn="{{ $data['dataColumn'] }}" data-order="{{ $data['dataOrder'] }}"
                                class="{{ $data['thClass'] }}" {!! $data['thAttribute'] ?: '' !!}>
                                <span class="{{ $data['svgLable'] }}">
                                    {{$data['label']}}
                                    <x-tables.table-head-svg svgWidth="12px" svgHeight="12px" svgFillColor="#333333a1" />
                                </span>
                            </th>
                        @endforeach
                    </x-tables.table-head>
                    <x-tables.table-body tableClass="bg-white table-light" tableId="user_activites_data_table" />
                </x-tables.table>
            </x-tables.table-component>
            <x-tables.table-footer footerClass="row table_last_row mb-1">
                <div class="col-1">
                    <x-dropdown.table-footer-select-dropdown 
                        labelClass="item_class"
                        labelName="Peritem"
                        dropdownBox="custom-select"
                        selectClass="ps-1"
                        selectId="perItemControl"
                        selectStyle="background: linear-gradient(5deg, gray, transparent 3%, lightgray, silver);border:1px solid lightgray;"
                        selectedValue="10"
                    />
                </div>
                <div class="col-3">
                    <x-tables.table-entries
                        labelClass="per_item_class"
                        entryId="total_per_items"
                        showId="per_items_num"
                        totalIems="total_items" 
                    />
                </div>
                <div class="col-8">
                    <div class="pagination mt-1" id="activities_users_data_table_paginate" style="float: right;padding-top:1px;"> </div>
                </div>
            </x-tables.table-footer>
        </div>
    @else
        @include('super-admin.user-details.error.data-table-permission')
    @endif
@else
    @include('super-admin.user-details.error.unauthorize')
@endif