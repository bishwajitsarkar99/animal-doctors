export function initializeMenuEvents(e,t=!1){let i=document.getElementById(e),n=i.querySelectorAll("li"),s=i.querySelectorAll("span"),r=i.querySelectorAll(t?".role_enter_press":"email_menu"===e?".email_enter_press":".enter_press"),l=i.querySelectorAll(t?"#role_select_list_item":"email_menu"===e?"#email_select_list_item":"#select_list_item"),a=-1,o=!0;function d(t){if(o){if("ArrowDown"===t.key)a=(a+1)%n.length;else if("ArrowUp"===t.key)a=(a-1+n.length)%n.length;else if("ArrowRight"===t.key){if("branch_menu"===e){document.removeEventListener("keydown",d),initializeMenuEvents("role_menu",!0);return}if("role_menu"===e){document.removeEventListener("keydown",d),initializeMenuEvents("email_menu");return}}else if("ArrowLeft"===t.key){if("email_menu"===e){document.removeEventListener("keydown",d),initializeMenuEvents("role_menu",!0);return}if("role_menu"===e){document.removeEventListener("keydown",d),initializeMenuEvents("branch_menu");return}}else if("Escape"===t.key){let i=document.getElementById("branchBox"),s=document.getElementById("roleBox"),r=document.getElementById("emailBox");"branch_menu"===e&&i?(i.setAttribute("hidden",!0),document.removeEventListener("keydown",d),$("#tabAccess").attr("hidden",!0),$("#home").addClass("active show"),$("#tabAccess").removeClass("active"),$("#tabHome").addClass("active"),$("#userBranchPermission").removeClass("active show"),$("#branchBox").removeAttribute("hidden")):"role_menu"===e&&s?(s.setAttribute("hidden",!0),i?.removeAttribute("hidden"),document.removeEventListener("keydown",d),initializeMenuEvents("branch_menu")):"email_menu"===e&&r&&(r.setAttribute("hidden",!0),i?.removeAttribute("hidden"),s?.removeAttribute("hidden"),document.removeEventListener("keydown",d),initializeMenuEvents("branch_menu"),initializeMenuEvents("role_menu",!0)),o=!1,a=-1,m();return}m()}}function m(){if(n.forEach((e,t)=>{let i=s[t],n=r[t],o=l[t];t===a?(e.classList.add("highlight"),i&&(i.classList.add("bage_display"),i.classList.remove("bage_display_none")),n&&(n.classList.add("bage_display"),n.classList.remove("bage_display_none")),o&&o.setAttribute("data-val","1"),e.blur()):(e.classList.remove("highlight"),i&&(i.classList.remove("bage_display"),i.classList.add("bage_display_none")),n&&(n.classList.remove("bage_display"),n.classList.add("bage_display_none")),o&&o.setAttribute("data-val","0"))}),a>=0){let e=n[a];e.classList.add("highlight"),e.focus()}}document.removeEventListener("keydown",d),document.addEventListener("keydown",d),n.forEach((e,t)=>{e.addEventListener("click",()=>{a=t,m()})}),o&&n.length>0&&(a=0,m())}